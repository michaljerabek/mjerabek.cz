!function(t){!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var s=(new Date).getTime(),n=Math.max(0,16-(s-t)),r=window.setTimeout(function(){e(s+n)},n);return t=s+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var e="",i=function(){var t=document.createElement("div"),i="transform";return["","o","ms","moz","webkit"].some(function(s){var n=s?s+"Transform":"transform";if(void 0!==t.style[n])return i=n,e=s?"-"+s+"-":"",!0}),i}(),s=function(){var t=document.createElement("div");return t.style[i]="translate3d(0,0,0)",!!t.style[i]}(),n="transition",r="",o=function(){var t=document.createElement("div"),e=["transition","transitionend","","OTransition","otransitionend","-o-","MozTransition","transitionend","-moz-","WebkitTransition","webkitTransitionEnd","-webkit-"],i=0,s=e.length;for(i;i<s;i+=3)if(void 0!==t.style[e[i]])return n=e[i],r=e[i+2],e[i+1];return null}(),a={value:[],is3d:!1},h=function(t){var e=getComputedStyle(t[0])[i];return e="none"!==e&&e?e:"matrix(1, 0, 0, 1, 0, 0)",a.value=e.replace(/^.*\((.*)\)$/g,"$1").split(/, +/),a.is3d=-1!==e.indexOf("3d"),a},l=function(t){var e=h(t);return{x:e.is3d?+e.value[12]:+e.value[4],y:e.is3d?+e.value[13]:+e.value[5]}},d=function(t,e,i){i=i||0;var s="client"+e.toUpperCase();return t=t.originalEvent||t,"number"==typeof t[s]?t[s]:t.touches[i]?t.touches[i][s]:0},c=function(t){return(t instanceof HTMLElement?t:t[0]).getBoundingClientRect()},f=function(){var e=t([null]);return function(t){return e[0]=t,e}}(),u=t(window),m="Infinitum",p={self:"infinitum",disabled:"infinitum--disabled",start:"infinitum--start",end:"infinitum--end",center:"infinitum--center",debug:"infinitum--debug",item:"infinitum__item",current:"infinitum__item--current",possibleCurrent:"infinitum__item--possible-current",hide:"infinitum__item--hide",toEnd:"infinitum__item--to-end",toStart:"infinitum__item--to-start",track:"infinitum__track",dragging:"infinitum__track--dragging",moving:"infinitum__track--moving",speed0:"infinitum__track--static",speed1:"infinitum__track--slow",speed2:"infinitum__track--medium",speed3:"infinitum__track--fast",selector:function(t,e){return(e?":not(":"")+"."+this[t]+(e?")":"")}},_={willLeft:"willLeft",willTranslate:"willTranslate",translate:"translate",offset:"offset",fakeTransitionTimeout:"fakeTransitionTimeout",url:"infinitum-url"},v={START:"start",END:"end",CENTER:"center"},T={CLOSEST:"closest",STILL_INSIDE:"still-inside",FULL:"full"},g={selector:p.selector("self"),el:null,trackSelector:null,itemSelector:null,reverseItems:!1,mode:v.START,wheelKeysTapSetCurrent:!0,fade:!0,currentIn:T.CLOSEST,currentOut:T.STILL_INSIDE,clearEdge:!0,breakAll:!1,startBreak:v.CENTER,endBreak:v.END,breakOnEdge:!1,balanced:!1,refreshItems:!0,keyThrottle:75,wheelThrottle:40,watchContainer:0,watchItems:0,debug:!1};t.easing["easeOutQuad."+m]=function(t){return 1-(1-t)*(1-t)};var E=[],I=[],S=1,C=null,R=!0,N=window.Infinitum=function(t){this.id=m+S++,this.NS="."+this.id,this.initialized=!1,this._hasPointer=!1,this._shouldCancelRAF=!0,this._lastTrackX=0,this._lastFadeSpeed=-1,this.startItemPosWill=0,this.endItemPosWill=0,this.$willStartItem=null,this.$willEndItem=null,this.$leftItemsOver=null,this.$rightItemsOver=null,this.$insideItems=null,this.init(t)};N.CLASS=p,N.EVENT={tap:"tap",key:"key",scroll:"scroll",dragging:"dragging",dragend:"dragend",change:"change",possibleChange:"possiblechange"},N.DIR={LEFT:1,RIGHT:2},N.DEFAULTS=g,N.POSITION=v,N.CURRENT=T,N.FAKE_TRANSITION_TIMEOUT=700,N.CAPTURE_WHEEL_TIMEOUT=375,N.prototype.init=function(t,e){if(this.initialized){if(!e)return;this.destroy()}I.push(this),this._animate=this._animate.bind(this),this._initOptions(t),this._lastDir=this.options.mode===v.END?N.DIR.RIGHT:N.DIR.LEFT,this._prepareSelf(),this._prepareTrack(),this._prepareItems(),this._initEvents(),this.initialized=!0,this.options.debug&&this.$self.addClass(p.debug)},N.prototype.destroy=function(){if(this.initialized){I.splice(I.indexOf(this),1),this._shouldCancelRAF=!0,this._forceCancelRAF=!0,cancelAnimationFrame(this._lastRAF),this._destroyEvents(),this.$self.removeAttr("data-"+_.url).removeClass(p.self).removeClass(p.disabled).removeClass(this.options.mode===v.START?p.start:this.options.mode===v.END?p.end:p.center).removeClass(p.debug);var t={};t.textIndent="",t[i]="",t[n+"Duration"]="",this.$track.stop(!0,!0).css(t).off(this.NS,"").removeClass(p.track).removeClass(p.dragging).removeClass(p.moving).removeClass(p.speed0).removeClass(p.speed1).removeClass(p.speed2).removeClass(p.speed3).removeData([_.willTranslate+this.NS,_.fakeTransitionTimeout+this.NS]),this._trackXShouldBe=0,this.$items.each(function(t,e){var i=f(e);clearTimeout(i.data(_.fakeTransitionTimeout+this.NS)),i.removeData([_.fakeTransitionTimeout+this.NS,_.willLeft+this.NS,_.offset+this.NS,_.translate+this.NS])}.bind(this));var e={};e[i]="",this.options.reverseItems&&this._reverseItems(),this.$items.css(e).off(this.NS).removeClass(p.item).removeClass(p.current).removeClass(p.possibleCurrent).removeClass(p.toEnd).removeClass(p.toStart).removeClass(p.hide),this.$self=this.$track=this.$items=this.$currentItem=this.$leftItemsOver=this.$rightItemsOver=this.$insideItems=this._$possibleCurrent=this.$willStartItem=this.$willEndItem=null,this.initialized=!1}},N.prototype.refresh=function(e,i){this.destroy(),this.init(i?t.extend({},this.options,e):e)},N.prototype.softRefresh=function(t){this.refreshing=!0,this._generateSelfRect(),(this.options.refreshItems&&!1!==t||t)&&(this._prepareItems(!0),this._fakeMove(!1)),this.refreshing=!1},N.prototype.setCurrent=function(t,e){if(this._generateSelfRect(),"number"==typeof t?t=this.$items.eq(t):"string"==typeof t&&(t=this.$items.filter(t)),this._setCurrent(t,!1,!1,!1,e),e){var i=this.options.fade;this.options.fade=!1,this._move(this._lastDir===N.DIR.LEFT?-1:1,!1,!0),this.options.fade=i}},N.prototype.on=function(t,e){this.$self.on(t,e)},N.prototype.off=function(t){this.$self.off(t)},N.prototype.disable=function(){this.$self.addClass(p.disabled),this.disabled=!0},N.prototype.enable=function(){this.$self.removeClass(p.disabled),this.disabled=!1},N.prototype.findNext=function(t){var e=(t=t||this.$currentItem).next();return e.length||(e=this.$items.first()),e},N.prototype.findPrev=function(t){var e=(t=t||this.$currentItem).prev();return e.length||(e=this.$items.last()),e},N.prototype.next=function(){this._lastDir=N.DIR.LEFT,this._setCurrent(this.findNext(),!1,!0)},N.prototype.prev=function(){this._lastDir=N.DIR.RIGHT,this._setCurrent(this.findPrev(),!1,!0)},N.prototype.dragging=function(){return!1!==this._hasPointer},N.prototype._initOptions=function(e){"string"==typeof e&&(e={selector:e}),e&&(e.jquery||e instanceof HTMLElement)&&(e={el:e}),(e=e||this.options||{}).mode===v.CENTER&&(e.currentOut=e.currentIn);var i=null;!1===e.fade&&((i=t.extend({},g)).startBreak=N.POSITION.END,i.endBreak=N.POSITION.START),e.mode===v.CENTER&&((i=i||t.extend({},g)).startBreak=N.POSITION.END,i.endBreak=N.POSITION.START,i.currentIn=N.CURRENT.CLOSEST,i.currentOut=N.CURRENT.CLOSEST,i.clearEdge=!1,i.balanced=!0),e.mode===v.END&&!1!==e.fade&&((i=i||t.extend({},g)).startBreak=v.END,i.endBreak=v.CENTER),this.options=t.extend({},i||g,this.options===e?{}:this.options,e),o||(this.options.fade=!1)},N.prototype._prepareSelf=function(){this.$self=this.options.el&&this.options.el.jquery?this.options.el:t(this.options.el instanceof HTMLElement?this.options.el:this.options.selector),this.$self.attr("tabindex",0).attr("data-"+_.url,"https://github.com/michaljerabek/infinitum").addClass(this.options.mode===v.START?p.start:this.options.mode===v.END?p.end:p.center).addClass(p.self),this._generateSelfRect()},N.prototype._generateSelfRect=function(t){this._origSelfRect=c(this.$self);var e=this.$self.css(["padding-left","padding-right","border-left-width","border-right-width"]),i={};if(i.left=this._origSelfRect.left+parseFloat(e["padding-left"])+parseFloat(e["border-left-width"]),i.right=this._origSelfRect.right-parseFloat(e["padding-right"])-parseFloat(e["border-right-width"]),i.center=this._origSelfRect.left+(this._origSelfRect.right-this._origSelfRect.left)/2,i.width=this._origSelfRect.width,i.height=this._origSelfRect.height,t)return i;this._selfRect=i},N.prototype._prepareTrack=function(){this.$track=this.options.trackSelector?t(this.options.trackSelector):this.$self.children().first(),this.$track.addClass(p.track),this._speed=[7,7,7,7,7],this._setTrackPosition(0,!1),this._trackXShouldBe=0},N.prototype._reverseItems=function(){var e=this.$items.first().parent();this.$items=t(this.$items.get().reverse()).each(function(t,i){e.append(i)}.bind(this))},N.prototype._prepareItems=function(e){e||(this.$currentItem=t()),this.$items=this.options.itemSelector?this.$track.find(this.options.itemSelector):this.$track.children(),this.$items.addClass(p.item),!this.initialized&&this.options.reverseItems&&this._reverseItems();var n=0,r=0,o=this;if(this.$items.each(function(t,e){var a=f(e),h={},l={};h[i]=s?"translate3d(0px, 0px, 0px)":"translateX(0px)",a.css(h),l[_.translate+o.NS]=0,l[_.offset+o.NS]=n,l[_.willLeft+o.NS]=n,a.data(l),n+=a.outerWidth(),r=n}),this.options.watchItems&&(this._lastSizes=this.$items.get().map(function(t){return c(t)})),this._sortItems(),e)return this._moveToItem(this.$currentItem,!1,!1,!0),void(this._$possibleCurrent=this.$currentItem);this._initCurrentItem(r)},N.prototype._initCurrentItem=function(e){var i;null!==this.options.current&&void 0!==this.options.current&&("number"==typeof this.options.current?i=this.$items.eq(this.options.current):this.options.current instanceof HTMLElement?i=t(this.options.current):this.options.current.jquery&&(i=this.options.current)),i&&i.length&&-1!==this.$items.get().indexOf(i[0])||(i=this.options.mode===v.START?this.$items.first():this.options.mode===v.END?this.$items.last():this._findCenterItem(e)),this._setCurrent(i,!1,!1,!1,!0),this._$possibleCurrent=this.$currentItem,this._fixItemsPositions()},N.prototype._findCenterItem=function(t){var e=0,i=t/2,s=this;return this.$items.each(function(t,n){var r=f(n),o=r.data(_.willLeft+s.NS),a=o+r.outerWidth();if(o<=i&&a>=i)return e=t,!1}),this.$items.eq(e)},N.prototype._initEvents=function(){1===I.length&&this._initGlobalEvents();var t=this;this.$self.on("mousedown"+this.NS+" touchstart"+this.NS,this._onPointerStart.bind(this)),this.$self.on("click"+this.NS,p.selector("item"),function(e){t._byMouse||t._byTouch||t.disabled||t._onPointerEnd(e),t._byMouse=!1,e.preventDefault()});var e=null;this.$self.on("keydown"+this.NS,function(i){t.disabled||e||-1===[37,38,39,40].indexOf(i.which)||(e=!0,setTimeout(function(){e=!1},t.options.keyThrottle),t._onKey(i))});var i=null;this.$self.on("mousewheel"+this.NS+" DOMMouseScroll"+this.NS,function(e){R&&!t.disabled&&(i?e.preventDefault():(i=!0,setTimeout(function(){i=!1},t.options.wheelThrottle),t._onWheel(e)))}),this.options.watchContainer&&(this._containerWatcher=setInterval(function(){var e=t._generateSelfRect(!0);e.width.toFixed(2)===t._selfRect.width.toFixed(2)&&e.height.toFixed(2)===t._selfRect.height.toFixed(2)||t.softRefresh()},this.options.watchContainer)),this.options.watchItems&&(this._itemsWatcher=setInterval(function(){var e=t.$items.get().map(function(t){return c(t)}),i=0;for(i;i<t._lastSizes.length;i++)if(e[i].width.toFixed(2)!==t._lastSizes[i].width.toFixed(2)||e[i].height.toFixed(2)!==t._lastSizes[i].height.toFixed(2))return void t.softRefresh()},this.options.watchItems))},N.prototype._initGlobalEvents=function(){var t=null,e=document.documentElement.clientHeight,i=document.documentElement.clientWidth;u.on("resize."+m,function(){i===document.documentElement.clientWidth&&e===document.documentElement.clientHeight||(clearTimeout(t),t=setTimeout(function(){I.forEach(function(t){t.softRefresh()})},50),e=document.documentElement.clientHeight,i=document.documentElement.clientWidth)}),u.on("touchmove."+m,function(t){E.length&&t.preventDefault()}),u.on("scroll."+m,function(t){t.target===document&&(R=!1,clearTimeout(C),C=setTimeout(function(){R=!0},N.CAPTURE_WHEEL_TIMEOUT))})},N.prototype._destroyEvents=function(){clearInterval(this._containerWatcher),clearInterval(this._itemsWatcher),this.$self.off(this.NS),u.on(this.NS),I.length||u.off("touchstart."+m).off("scroll."+m).off("resize."+m)},N.prototype._onPointerStart=function(t){if(this._byMouse=!!t.type.match(/mouse/),this.disabled||this._skipMouse&&this._byMouse)this._skipMouse=!1;else if(!1!==this._hasPointer||this._byMouse&&0!==t.button)t.preventDefault();else{if(this._byTouch=!this._byMouse,this._skipNonmove=!0,this._generateSelfRect(),this.$self.focus(),this._hasPointer=!0,this._pointerIndex=0,this._draggingPrevented=!1,E.push(this),this._byTouch&&(this._hasPointer=t.originalEvent.changedTouches[0].identifier,this._findTouchPointerIndex(t)),this._fixVertical=null,this._setPossibleCurrentItem(!1,!0,!0),this._lastClientY=d(t,"y",this._pointerIndex),this._lastClientX=d(t,"x",this._pointerIndex),this._trackMoved=!1,this._byMouse)return u.on("mousemove"+this.NS,this._onPointerMove.bind(this)).one("mouseup"+this.NS,this._onPointerEnd.bind(this)),void t.preventDefault();this.$self.on("touchmove"+this.NS,this._onPointerMove.bind(this)).one("touchend"+this.NS,this._onPointerEnd.bind(this)),this._skipMouse=!0}},N.prototype._onPointerMove=function(e){if(!1!==this._hasPointer){e.type.match(/touch/)&&this._findTouchPointerIndex(e);var i=d(e,"y",this._pointerIndex),s=d(e,"x",this._pointerIndex),n=s-this._lastClientX;if(n||!this._skipNonmove)if(this._skipNonmove=!1,null===this._fixVertical&&(this._clearTrackTransition(),this._fixVertical=!this._byMouse&&this._fixVertical),this._byTouch&&null===this._fixVertical&&1===e.originalEvent.touches.length&&(this._fixVertical=Math.abs(i-this._lastClientY)+1>Math.abs(n)),this._fixVertical)-1!==E.indexOf(this)&&E.splice(E.indexOf(this),1);else{if(n){this._trackMoved||this.$track.addClass(p.dragging);var r=t.extend({},t.Event(),{type:N.EVENT.dragging,target:this.$self[0],originalEvent:e.originalEvent,infinitum:this});if(this.$self.trigger(r,this),r.isDefaultPrevented())return void(this._draggingPrevented=!0);this._forceCancelRAF=!this._trackMoved,this._move(n,!1,!1),this._lastTrackX=l(this.$track).x}this._lastDir=n?s>this._lastClientX?N.DIR.RIGHT:N.DIR.LEFT:this._lastDir,this._trackMoved=s!==this._lastClientX||this._trackMoved,this._lastClientX=s,this._lastClientY=i,e.preventDefault()}else this._skipNonmove=!1}else e.preventDefault()},N.prototype._isReverseDirection=function(){return this._lastDir===N.DIR.RIGHT&&(this.options.mode===v.START||this.options.mode===v.CENTER)||this._lastDir===N.DIR.LEFT&&this.options.mode===v.END},N.prototype._findTouchPointerIndex=function(t){for(var e in t.originalEvent.touches)if(t.originalEvent.touches.hasOwnProperty(e)&&t.originalEvent.touches[e].identifier===this._hasPointer){this._pointerIndex=e;break}},N.prototype._onPointerEnd=function(e){if(!(this._byMouse&&0!==e.button||!1===this._hasPointer&&"click"!==e.type)){if(this._hasPointer=!1,this._forceCancelRAF=!1,-1!==E.indexOf(this)&&E.splice(E.indexOf(this),1),u.off("mousemove"+this.NS),this.$self.off("touchmove"+this.NS),!this._trackMoved&&null===this._fixVertical&&!this._draggingPrevented)return this._onTap(e);this._clearTrackTransition(),this._draggingPrevented=!1,this._setCurrent(this._findCurrentItem(),!1,!1,!0),this.$track.removeClass(p.dragging);var i=t.extend({},t.Event(),{type:N.EVENT.dragend,target:this.$self[0],originalEvent:e.originalEvent,infinitum:this});this.$self.trigger(i,this),this._trackMoved=!1,i.isDefaultPrevented()||e.preventDefault()}},N.prototype._onTap=function(e){var i=t(e.target).closest(p.selector("item"));if(i.length){if(this._triggerChangeTypeEvent(N.EVENT.tap,e,i).isDefaultPrevented())return;var s=c(this.$currentItem[0]).left,n=c(i[0]).left;this._lastDir=s===n?this.options.mode===v.END?N.DIR.RIGHT:N.DIR.LEFT:s>n?N.DIR.RIGHT:N.DIR.LEFT,this.$currentItem[0]===i[0]?this._setPossibleCurrentItem(!0):(this._clearTrackTransition(),this.options.wheelKeysTapSetCurrent?this._setCurrent(i,!1):this._moveToItem(i,!1))}else this._setPossibleCurrentItem(!0);return this._trackMoved=!1,!i.length},N.prototype._onWheel=function(t){if(!this.disabled){this._clearTrackTransition(),this._shouldCancelRAF=!0,this._lastDir=(t.originalEvent.detail||t.originalEvent.deltaY||t.originalEvent.deltaX||-t.originalEvent.wheelDelta)>0?N.DIR.LEFT:N.DIR.RIGHT;var e=this._lastDir===N.DIR.LEFT?this.findNext():this.findPrev();this._triggerChangeTypeEvent(N.EVENT.scroll,t,e).isDefaultPrevented()||(this._trackMoved=!0,this.$self.focus(),this._generateSelfRect(),this.options.wheelKeysTapSetCurrent?this._setCurrent(e,!1,!0):this._moveToItem(e,!0),t.preventDefault())}},N.prototype._onKey=function(t){if(!this.disabled){this._clearTrackTransition(),this._shouldCancelRAF=!0,this._lastDir=-1===[37,38].indexOf(t.which)?N.DIR.LEFT:N.DIR.RIGHT;var e=this._lastDir===N.DIR.LEFT?this.findNext():this.findPrev();this._triggerChangeTypeEvent(N.EVENT.key,t,e).isDefaultPrevented()||(this._trackMoved=!0,this._generateSelfRect(),this.options.wheelKeysTapSetCurrent?this._setCurrent(e,!1,!0):this._moveToItem(e,!0),t.preventDefault())}},N.prototype._triggerChangeTypeEvent=function(e,i,s,n){var r=t.extend({},t.Event(),{type:e,target:s[0],fromElement:this.$currentItem[0],toElement:s[0],originalEvent:i?i.originalEvent:null,infinitum:this},n||null);return this.$self.trigger(r,this),r},N.prototype._moveTrack=function(t,e,i){var s=l(this.$track).x+t;this._setTrackPosition(s,e,i),this._trackXShouldBe=s},N.prototype._setTrackPosition=function(t,e,r){var a=this;if(this._clearTrackTransition(),this.$track[0].style[n]=e?"":"none",e){this._shouldCancelRAF=!1,this._forceCancelRAF=!1;var h,l=this._setTrackSpeed(t,r),d=function(t){(!t||t.originalEvent.target===a.$track[0]&&t.originalEvent.propertyName.match(/transform/i))&&(a._clearTrackTransition(),a.$track[0].style[n+"Duration"]=e?"":"none",a._generateSelfRect(),a._shouldCancelRAF=!0)};this.$track.on(o+this.NS,d),h=setTimeout(d,l+50),this.$track.data(_.fakeTransitionTimeout+this.NS,h),o||this._animateTrackWithJQuery(t,l,d)}!o&&e||(this.$track[0].style[i]=s?"translate3d("+t+"px, 0px, 0px)":"translateX("+t+"px)"),this.$track.data(_.willTranslate+this.NS,t),e&&(this._lastRAF=requestAnimationFrame(this._animate))},N.prototype._animateTrackWithJQuery=function(t,e,s){var n=l(this.$track).x;this.$track.stop(!0).css({textIndent:0}).animate({textIndent:1},{duration:e,easing:"easeOutQuad."+m,step:function(e){var s={};s[i]="translateX("+(n+(t-n)*e)+"px)",this.$track.css(s)}.bind(this),complete:s})},N.prototype._clearTrackTransition=function(){clearTimeout(this.$track.data(_.fakeTransitionTimeout+this.NS)),this.$track.off(o+this.NS).data(_.fakeTransitionTimeout+this.NS,null)},N.prototype._getAvgSpeed=function(){return this._speed.reduce(function(t,e){return t+e},0)/this._speed.length},N.prototype._setTrackSpeed=function(t,e){var i=l(this.$track).x,s=Math.abs(i-t),r=100;if(e){var o=this._getAvgSpeed();r/=Math.max(1,Math.log(o/3)),r=2*Math.max(Math.min(r,150),50)}var a=(r*Math.max(1,Math.log(s/5))).toFixed();return a=Math.max(Math.min(a,650),150),this.$track[0].style[n+"Duration"]=a+"ms",a},N.prototype._setFadeSpeed=function(t,e){if(e){if(0===this._lastFadeSpeed)return;return this._lastFadeSpeed=0,void this.$track.removeClass(p.speed1).removeClass(p.speed2).removeClass(p.speed3).addClass(p.speed0)}t&&(this._speed=this._speed.slice(0,5),this._speed.unshift(Math.abs(t)));var i=this._getAvgSpeed();if(i<8){if(1===this._lastFadeSpeed)return;this._lastFadeSpeed=1,this.$track.removeClass(p.speed0).removeClass(p.speed2).removeClass(p.speed3).addClass(p.speed1)}else if(i<16){if(2===this._lastFadeSpeed)return;this._lastFadeSpeed=2,this.$track.removeClass(p.speed0).removeClass(p.speed1).removeClass(p.speed3).addClass(p.speed2)}else{if(3===this._lastFadeSpeed)return;this._lastFadeSpeed=3,this.$track.removeClass(p.speed0).removeClass(p.speed1).removeClass(p.speed2).addClass(p.speed3)}},N.prototype._move=function(t,e,i,s){clearTimeout(this._fixItemsPositionsTimeout),this.$track.addClass(p.moving),this._setFadeSpeed(t,i&&(!s||!this.initialized)),e||i||this._moveTrack(t),this._sortItems(e);var n=e&&this._shouldCancelRAF&&(!t||this._forceCancelRAF),r=n&&!this.$willStartItem.hasClass(p.current),o=n&&!this.$willEndItem.hasClass(p.current);this._moveItemsOverToTheOtherSide(t,n,r,o,i),i||this._setPossibleCurrentItem(n,t),e&&(!n||!(this.options.mode!==v.CENTER||!n||r&&o)&&this.options.balanced&&this.$items.length>2)?this._lastRAF=requestAnimationFrame(this._animate):n&&(i||!this.options.clearEdge&&this.options.mode!==v.CENTER||!r&&!o||this._fixItemsPositions(),this.$track.removeClass(p.moving))},N.prototype._moveItemsOverToTheOtherSide=function(t,e,i,s,n){this.options.mode===v.START?t<0||(i||n)&&this.options.clearEdge?this._moveLeftItemsOverToTheEnd(e,i,n):t>0&&this._moveRightItemsOverToTheStart(e):this.options.mode===v.END?t>0||(s||n)&&this.options.clearEdge?this._moveRightItemsOverToTheStart(e,s,n):t<0&&this._moveLeftItemsOverToTheEnd(e):t<0||!t&&!s?this._moveLeftItemsOverToTheEnd(e):(t>0||n||!t&&!i)&&this._moveRightItemsOverToTheStart(e)},N.prototype._fixItemsPositions=function(){clearTimeout(this._fixItemsPositionsTimeout);var t=this,e=!1;this.$items.each(function(i,s){if(f(s).data(_.fakeTransitionTimeout+t.NS))return t._fixItemsPositionsTimeout=setTimeout(t._fixItemsPositions.bind(t),0),!1;e=i===t.$items.length-1}),e&&(this._forceCancelRAF=!0,this._fakeMove(!0))},N.prototype._fakeMove=function(t){if(this.options.mode===v.CENTER)return this._move(1,!1,!0),void this._move(-1,!1,!0);this._move(this._lastDir===N.DIR.LEFT?-1:1,!0,!0,t)},N.prototype._sortItems=function(e){var i=this._getItemsData(e);this.startItemPosWill=i.startPosWill,this.endItemPosWill=i.endPosWill,this.endItemWidthWill=i.endWidthWill,this.$insideItems=t(i.inside),this.$willStartItem=this.$willStartItem&&this.$willStartItem[0]===i.willStart?this.$willStartItem:t(i.willStart),this.$willEndItem=this.$willEndItem&&this.$willEndItem[0]===i.willEnd?this.$willEndItem:t(i.willEnd),this._setItemsOverInCorrectOrder(i),this._setItemOverIfNotBreakOnEdge(i)},N.prototype._setItemsOverInCorrectOrder=function(e){e.leftOver.length>1?this.$leftItemsOver=t(e.leftOver.sort(function(t,e){return t.getBoundingClientRect().left-e.getBoundingClientRect().left})):this.$leftItemsOver=t(e.leftOver),e.rightOver.length>1?this.$rightItemsOver=t(e.rightOver.sort(function(t,e){return e.getBoundingClientRect().left-t.getBoundingClientRect().left})):this.$rightItemsOver=t(e.rightOver)},N.prototype._setItemOverIfNotBreakOnEdge=function(t){if(1!==this.$items.length||this.options.mode!==v.CENTER)if(this.options.mode===v.START||this.options.mode===v.CENTER&&this._isReverseDirection()){if(!this.options.breakOnEdge&&!this.$leftItemsOver.length&&!this.$rightItemsOver.length&&t.willStartRect.left>this._selfRect.left){if(this.options.balanced)return void(Math.abs(-this._selfRect.center+(t.willStartRect.left-t.willEndRect.width))<=Math.abs(-this._selfRect.center+t.willEndRect.right)&&(this.$rightItemsOver=this.$willEndItem));this.$rightItemsOver=this.$willEndItem}}else if(this.options.mode===v.END||this.options.mode===v.CENTER&&!this._isReverseDirection()){if(!this.options.breakOnEdge&&!this.$leftItemsOver.length&&!this.$rightItemsOver.length&&t.willEndRect.right<this._selfRect.right){if(this.options.balanced){var e=Math.abs(-this._selfRect.center+t.willStartRect.left);return void(Math.abs(-this._selfRect.center+(t.willEndRect.right+t.willEndRect.width))<=e&&(this.$leftItemsOver=this.$willStartItem))}this.$leftItemsOver=this.$willStartItem}}else;},N.prototype._getItemsData=function(t){var e=this,i=[],s=[],n=[],r=null,o=null,a=null,h=null,l=null,d=null,u=null;return this.$items.each(function(m,p){var T=f(p),g=c(p),E=T.data(_.willLeft+e.NS)-(T.data(_.translate+e.NS)+T.data(_.offset+e.NS));if((null===l||l>g.left+E)&&(l=g.left+E,r=p,a={left:g.left+E,right:g.right+E,width:g.width}),(null===d||d<g.right+E)&&(d=g.right+E,u=g.width,o=p,h={left:g.left+E,right:g.right+E,width:g.width}),t&&p===e._$possibleCurrent[0])n.push(p);else if(e.options.mode!==v.CENTER||!e.options.balanced||e.options.breakOnEdge){var I=e._getBreakEdge(g);I.left<e._selfRect.left?i.push(p):I.right>e._selfRect.right?s.push(p):n.push(p)}else g.left+E<=e._selfRect.center&&g.right+E>=e._selfRect.center?n.push(p):g.left+E<=e._selfRect.center?i.push(p):s.push(p)}),{leftOver:i,rightOver:s,inside:n,willStart:r,willEnd:o,willStartRect:a,willEndRect:h,startPosWill:l,endPosWill:d,endWidthWill:u}},N.prototype._getBreakEdge=function(t){var e=t.left,i=t.right-1;switch(this.options.startBreak){case N.POSITION.CENTER:e=t.left+t.width/2;break;case N.POSITION.END:e=t.right-1}switch(this.options.endBreak){case N.POSITION.START:i=t.left;break;case N.POSITION.CENTER:i=t.right-1-t.width/2}return{left:e,right:i}},N.prototype._moveLeftItemsOverToTheEnd=function(e,i,s){var n=this,r=[],o=0;this.$leftItemsOver.each(function(){var a=f(this),h=a.outerWidth();if(!n.options.balanced||n.options!==v.CENTER&&e&&s&&n.options.clearEdge){if(n.options.mode===v.START||n.options.mode===v.CENTER){if(!n.options.breakAll&&!n.options.clearEdge&&n.endItemPosWill+o>=n._selfRect.right)return}else if(n.options.mode===v.END&&!n.options.breakAll&&n.endItemPosWill+o+.5>=n._selfRect.right)return}else{var l=Math.abs(-n._selfRect.center+(n.startItemPosWill+o));if(Math.abs(-n._selfRect.center+(n.endItemPosWill+o+h))>=l)return!1}n.options.clearEdge&&i&&(a.hasClass(p.current)||!n.options.clearEdge&&!s)||(!a.hasClass(p.hide)||a.hasClass(p.toStart)||n.options.clearEdge&&i||s)&&(o+=h,r.push(t(this)))}),r.forEach(function(t){n._breakItem(t,v.END)}),e&&this._clearHideStates(v.START)},N.prototype._moveRightItemsOverToTheStart=function(e,i,s){var n=this,r=[],o=0;this.$rightItemsOver.each(function(){var a=f(this),h=a.outerWidth();if(!n.options.balanced||n.options!==v.CENTER&&e&&s&&n.options.clearEdge){if(n.options.mode===v.START||n.options.mode===v.CENTER){if(!n.options.breakAll&&n.startItemPosWill-o-.5<=n._selfRect.left)return}else if(n.options.mode===v.END&&!n.options.breakAll&&!n.options.clearEdge&&n.startItemPosWill-o<=n._selfRect.left)return}else if(Math.abs(-n._selfRect.center+(n.startItemPosWill-o-h))>=Math.abs(-n._selfRect.center+(n.endItemPosWill-o)))return!1;n.options.clearEdge&&i&&(a.hasClass(p.current)||!n.options.clearEdge&&!s)||(!a.hasClass(p.hide)||a.hasClass(p.toEnd)||n.options.clearEdge&&i||s)&&(o+=h,r.push(t(this)))}),r.forEach(function(t){n._breakItem(t,v.START)}),e&&this._clearHideStates(v.END)},N.prototype._breakItem=function(t,e){var r=this;t.off(o+this.NS),clearTimeout(t.data(_.fakeTransitionTimeout+this.NS));var a=e===v.START?this.findNext(t):this.findPrev(t),h=e===v.START?t.outerWidth():-a.outerWidth(),l=a.data(_.willLeft+this.NS)-h;if(this.options.fade){var d=getComputedStyle(t[0]).opacity;t.addClass(e===v.START?p.toStart:p.toEnd).removeClass(e===v.START?p.toEnd:p.toStart).removeClass(p.hide),t.data(_.willLeft+this.NS,l);var c,f=e===v.END&&this.options.fade===v.END||e===v.START&&this.options.fade===v.START,u=function(a){if(!a||a.originalEvent.target===t[0]||"opacity"===a.originalEvent.propertyName){clearTimeout(c);var h={},l={},d=t.data(_.willLeft+r.NS)-t.data(_.offset+r.NS);h[i]=s?"translate3d("+d+"px, 0px, 0px)":"translateX("+d+"px)",h[n]=f||!0===r.options.fade?"":"none",l[_.translate+r.NS]=d,l[_.fakeTransitionTimeout+r.NS]=null,t.data(l).css(h),t.removeClass(p.hide).removeClass(e===v.START?p.toStart:p.toEnd),t.off(o+r.NS)}};f?(t.css(n,"none").addClass(p.hide),c=setTimeout(u,0),t.data(_.fakeTransitionTimeout+this.NS,c)):parseFloat(d)?(c=setTimeout(u,N.FAKE_TRANSITION_TIMEOUT),t.data(_.fakeTransitionTimeout+this.NS,c),t.on(o+this.NS,u),t.css(n,""),t.addClass(p.hide)):u()}else this._breakItemNoFade(t,l)},N.prototype._breakItemNoFade=function(t,e){var r={},o={},a=e-t.data(_.offset+this.NS);r[i]=s?"translate3d("+a+"px, 0px, 0px)":"translateX("+a+"px)",r[n]="",o[_.translate+this.NS]=a,o[_.willLeft+this.NS]=e,t.css(r).data(o)},N.prototype._clearHideStates=function(t){if(this.options.fade){var e=this;(t===v.END?this.$rightItemsOver:this.$leftItemsOver).each(function(){var i=f(this),s={};(t===v.END?i.hasClass(p.toStart):i.hasClass(p.toEnd))||(i.off(o+e.NS),clearTimeout(i.data(_.fakeTransitionTimeout+e.NS)),i.removeClass(p.hide).removeClass(t===v.END?p.toEnd:p.toStart),s[_.fakeTransitionTimeout+e.NS]=null,s[_.willLeft+e.NS]=i.data(_.translate+e.NS)+i.data(_.offset+e.NS),i.data(s))})}},N.prototype._animate=function(){this._move(l(this.$track).x-this._lastTrackX,!0),this._lastTrackX=l(this.$track).x},N.prototype._setCurrent=function(t,e,i,s,n){if(t&&t[0]){if(t[0]!==this.$currentItem[0]){if(this._triggerChangeTypeEvent(N.EVENT.change,null,t).isDefaultPrevented())return void(e||this._moveToItem(this.$currentItem,i,s,n));this.$currentItem.removeClass(p.current),this.$currentItem=t,t.addClass(p.current)}e||this._moveToItem(t,i,s,n)}},N.prototype._moveToItem=function(t,e,i,s){switch(this.options.mode){case v.START:return this._moveToItemModeStart(t,e,i,s);case v.END:return this._moveToItemModeEnd(t,e,i,s);case v.CENTER:return this._moveToItemModeCenter(t,e,i,s)}},N.prototype._moveToItemModeCenter=function(t,e,i,s){var n,r=t.data(_.willLeft+this.NS),o=t.data(_.translate+this.NS)+t.data(_.offset+this.NS),a=c(t[0]);if(s&&(this._shouldCancelRAF=!0,this._forceCancelRAF=!0),e){if(1===this.$items.length)return;if(n=this.$track.data(_.willTranslate+this.NS),this._isReverseDirection()){var h=this.findNext(t).outerWidth();return void this._setTrackPosition(n+a.width/2+h/2,!s,i)}var d=this.findPrev(t).outerWidth();this._setTrackPosition(n-a.width/2-d/2,!s,i)}else{var f=a.left+(r-o)-this._selfRect.left-(this._selfRect.right-this._selfRect.left)/2+a.width/2;(f||this._trackXShouldBe!==l(this.$track).x)&&this._moveTrack(-f,!s,i)}},N.prototype._moveToItemModeEnd=function(t,e,i,s){var n,r=t.data(_.willLeft+this.NS),o=t.data(_.translate+this.NS)+t.data(_.offset+this.NS),a=c(t[0]);if(s&&(this._shouldCancelRAF=!0,this._forceCancelRAF=!0),e){if(1===this.$items.length)return;if(n=this.$track.data(_.willTranslate+this.NS),this._isReverseDirection())return void this._setTrackPosition(n-a.width,!s,i);var h=this.findNext(t).outerWidth();this._setTrackPosition(n+h,!s,i)}else{var d=a.right+(r-o)-this._selfRect.right;d||this._trackXShouldBe!==l(this.$track).x?this._moveTrack(-d,!s,i):this.$willEndItem.length&&!this.$willEndItem.hasClass(p.current)&&this._fixItemsPositions()}},N.prototype._moveToItemModeStart=function(t,e,i,s){var n,r=t.data(_.willLeft+this.NS),o=t.data(_.translate+this.NS)+t.data(_.offset+this.NS),a=c(t[0]);if(s&&(this._shouldCancelRAF=!0,this._forceCancelRAF=!0),e){if(1===this.$items.length)return;if(n=this.$track.data(_.willTranslate+this.NS),this._isReverseDirection())return void this._setTrackPosition(n+a.width,!s,i);var h=this.findPrev(t).outerWidth();this._setTrackPosition(n-h,!s,i)}else{var d=a.left+(r-o)-this._selfRect.left;d||this._trackXShouldBe!==l(this.$track).x?this._moveTrack(-d,!s,i):this.$willStartItem.length&&!this.$willStartItem.hasClass(p.current)&&this._fixItemsPositions()}},N.prototype._setPossibleCurrentItem=function(t,e,i){if(e){var s=this._findCurrentItem(),n=s[0]!==this._$possibleCurrent[0];(n||i)&&(s.addClass(p.possibleCurrent),n&&(this._$possibleCurrent.removeClass(p.possibleCurrent),this._triggerChangeTypeEvent(N.EVENT.possibleChange,null,s),this._$possibleCurrent=s))}if(t)return this._$possibleCurrent.removeClass(p.possibleCurrent),void(e&&this._setCurrent(this._$possibleCurrent))},N.prototype._findCurrentItem=function(){return this._findClosestItem(this._isReverseDirection()?"out":"in")},N.prototype._findClosestItem=function(e){var i,s=this,n=null,r="in"===e?"currentIn":"currentOut";return this.$items.each(function(t,o){var a,h,l=f(o),d=l.data(_.willLeft+s.NS),u=l.data(_.translate+s.NS)+l.data(_.offset+s.NS),m=c(o),p=m.left+(d-u),g=m.right+(d-u);if(s.options.mode!==v.CENTER||s.options[r]===T.CLOSEST)s.options.mode===v.CENTER&&s.options[r]===T.CLOSEST?(a=p-s._selfRect.center+1,h=g-s._selfRect.center-1):(a=p-s._selfRect[s.options.mode===v.END?"right":"left"],h=g-s._selfRect[s.options.mode===v.END?"right":"left"]),s._isCloser(e,n,a,h)&&(n=s.options.mode===v.CENTER&&s.options[r]===T.CLOSEST?"in"===e?a:h:s.options.mode===v.END?h:a,i=o);else if(s._isCenter(p,g))return i=o,!1}),t(i)},N.prototype._isCenter=function(t,e){return t<=this._selfRect.center&&e>=this._selfRect.center},N.prototype._isCloser=function(t,e,i,s){var n="in"===t?"currentIn":"currentOut";if(this.options.mode===v.START)switch(this.options[n]){case T.CLOSEST:return null===e||Math.abs(i)<Math.abs(e);case T.FULL:return i>=0&&(null===e||Math.abs(i)<Math.abs(e));case T.STILL_INSIDE:return s>=.5&&(null===e||i<e)}else{if(this.options.mode!==v.END){if(this.options[n]===T.CLOSEST)switch(t){case"in":return null===e||Math.abs(i)<Math.abs(e);case"out":return null===e||Math.abs(s)<Math.abs(e)}return null===e||Math.abs(i)<Math.abs(e)}switch(this.options[n]){case T.CLOSEST:return null===e||Math.abs(s)<Math.abs(e);case T.FULL:return s<=0&&(null===e||Math.abs(s)<Math.abs(e));case T.STILL_INSIDE:return i<=-.5&&(null===e||s>e)}}}}(jQuery);
